How to Use in a shell

python3 main.py

--Location

一、洋流解算

二、运动学模型

从观测数据解得的加速度具有不可预测的观测噪声，且符合随机游走模型，不对噪声进行建模和估计的运动学直接解算，很容易使得累计误差影响预测，从而影响位置估计结果，所以这里使用卡尔曼滤波器（Kalman Filter）的方法，将观测数据和状态数据进行融合，求出最优的后验分布，提高预测结果的可置信度。

1. State definition

x = []
状态转移矩阵的定义：
观测矩阵的定义：
Interpretation: ???

2. State Propagantion

先验计算
先验协方差

3. State Update

后验三条

4. 再画个流程图

主要流程就是 先验预测（predict）-> 观测（Obs）-> 状态更新(Update后验) -> k = k + 1 -> 先验
然后状态更新那里给一根箭头出去，意思就是使用状态前三个量XYZ位置
观测从洋流解算给一个箭头进来

三、系统总结

通过洋流解算解出XYZ三个方向加速度（加点高级词汇，比如利用巴拉巴拉方法解的），作为观测量进入卡尔曼滤波器，巴拉巴拉（最优估计、状态传播等等），融合加速度和现状态的数据，取得当前位置估计的优化解，以此为后验分布投入第三问，给出最优投放点和巴拉巴拉

--Search
概述：
两个模型--随机游走模型和预测跟随模型

设备分析：
使用xx搜索设备，设备参数是什么，搜索半径是？？？，这里的？？？东西用变量名代替，比如SearchRadius搜索半径, seaspeed海流速度等等，可以进代码找 

结合搜救设备，只要搜索半径内存在目标船只，就认为搜索到，可以判断成功
反之，只要搜索次数超过一定threshold,就判定失败，因为此时卡尔曼滤波已经有很大的累计误差，根本搜救不了

一、随机游走搜索模型

就成功0.68左右那个，假设一段时间内洋流的方向和速度不变，将洋流方向设为x,垂直方向设为y，搜救船在x方向保持带高斯噪声的匀速运动，在y方向随机游走，相当于抽风（可以结合图描述一下，像个扫地的）

模型概述：
# model: subs 潜水艇
# x = x + vxdt
# y = y + vydt
# vx = vx + randomx
# vy = 0 + randomy
# Supposed in a small area, the flow goes mainly one way

# model: search boat 搜救船
# x = x + vxdt
# y = y + vydt
# vx = vx +- 0.5
# vy = 0 + randomy
# suppose that flows has no effect on search boat

模型优点：可以进行较大范围的搜索，对定位精度要求不是那么高，即使累计误差过大也有可能搜救到（瞎猫碰着死耗子）

模型缺点：搜索成功率过低，0.68左右，不适合洋流变化快、急和变化方向大的情况

二、 预测跟随模型：

模型概述：使用卡尔曼滤波给出的预测位置，船头始终朝着实时预测位置的方向持续前行，这里又可以做文章（比如为什么不考虑直接运行到预测相交位置，那是因为卡尔曼滤波给出的是实时信息，在未来观测不确定的情况下，预测较远的未来位置会产生极大的累计误差，俗称再见妈妈），通过给出实时位置，实现实时跟踪调整，并且以理论最快速度来接近预测点，大大提高了效率

模型表示：
# vx2 = search_speed * (xe1 - x2) / math.sqrt((xe1 - x2)^2 + (ye1 - y2)^2)
# vy2 = search_speed * (ye1 - y2) / math.sqrt((xe1 - x2)^2 + (ye1 - y2)^2)
# x2 = x2 + vx2*dt
# y2 = y2 + vy2*dt

xe1 ye1指的是卡尔曼滤波器对x1 y1的estimate,会有累计误差，潜水艇的运动模型与第一个模型相同，可以再写一遍，灵活凑字

模型实验：
0.9左右，再附上图，群里有个三线图

模型优缺点概述：

优点：太多了，比如预测量是对后验方差的最优估计，可以最大地提高搜索成功的概率，然后船头始终对准预测方向，最大限度节省燃料这些，在短时间内累计误差未到达很大的时候可以提供十分精确的估计

缺点：短时间内性能强同时伴有长时间的漂移无法估测，有可能偏离潜水艇真位置; 遇到极端情况时（比如说潜水艇进入小的水下漩涡、潜水艇某一个方向的状态量或者观测量一直在0附近徘徊时，会产生较大的突变，导致定位不准），性能或许没有第一个模型好用，但是它适合大多数情况（实验中模拟了洋流变快和变慢、变向的预测跟踪情况）